<div id="map" class="mapa">
  <%=
    map(:center => {
      :latlng => [-5.360528731202039, -42.67536163330079],
      :zoom => 15
    })
  %>
</div>
<br>

<script type="text/javascript">

   
   var quadras = JSON.parse('<%=escape_javascript @quadras.to_json %>'.replace(/&quot;/g,'"'));

        
     var wkt = new Wkt.Wkt();
     
    for (var i = 0; i < quadras.length; i++) {
        var quadra = quadras[i];
        var obj = wkt.toObject(wkt.read(quadra.localizacao));
        obj.bindPopup(quadra.descricao);
        obj.setStyle({
		      color: 'green'
		  });
        obj.addTo(map);
      }  

    var rios = JSON.parse('<%=escape_javascript @rios.to_json %>'.replace(/&quot;/g,'"'));

     
    for (var i = 0; i < rios.length; i++) {
        var rio = rios[i];
        var obj = wkt.toObject(wkt.read(rio.geom));
        
        obj.addTo(map);
      }

    var logradouros = JSON.parse('<%=escape_javascript @logradouros.to_json %>'.replace(/&quot;/g,'"'));

     
    for (var i = 0; i < logradouros.length; i++) {
        var logradouro = logradouros[i];
        var obj = wkt.toObject(wkt.read(logradouro.localizacao));
        
        obj.bindPopup(logradouro.descricao);
        obj.setStyle({
          color: 'red'
        });
        obj.addTo(map);
      }

    var edificacaos = JSON.parse('<%=escape_javascript @edificacaos.to_json %>'.replace(/&quot;/g,'"'));

    for (var i = 0; i < edificacaos.length; i++) {
        var edificacao = edificacaos[i];
        var obj = wkt.toObject(wkt.read(edificacao.geom));
        obj.setStyle({
          color: '#010189'
      });

        obj.addTo(map);
      }  
     

</script>


<div id='search-box'>
  <form action='/search' id='search-form' method='get' target='_top'>
    <input id='search-text' name='q' placeholder='Digite sua pesquisa' type='text'/>
    <button id='search-button' type='submit'><span>Buscar</span></button>
  </form>
</div>

<div class="layers">

	<table class="table">
    <thead>
      <th>Layers</th>
      <th></th>
      <th></th>
    </thead>
		<tbody>
			<tr>
				<td>Quadras</td>
				<td><%= link_to 'Detalhes', quadras_path, class:""%></td>
				<td><%= link_to 'Adicionar', new_quadra_path, class:""%></td>
			</tr>
			<tr>
				<td>Rios</td>
				<td><%= link_to 'Detalhes', rios_path, class:""%></td>
				<td><%= link_to 'Adicionar', new_rio_path, class:""%></td>
			</tr>
      <tr>
        <td>Logradouros</td>
        <td><%= link_to 'Detalhes', logradouros_path, class:""%></td>
        <td><%= link_to 'Adicionar', new_logradouro_path, class:""%></td>
      </tr>
      <tr>
        <td>Edificações</td>
        <td><%= link_to 'Detalhes', edificacaos_path, class:""%></td>
        <td><%= link_to 'Adicionar', new_edificacao_path, class:""%></td>
      </tr>
		</tbody>
	</table>

</div>